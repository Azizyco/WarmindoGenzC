<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Menu - WarmindoGenz</title>
  <link rel="stylesheet" href="../shared/css/base.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <header>
    <div style="display: flex; justify-content: space-between; align-items: center;">
      <div>
        <h1>ğŸœ Menu WarmindoGenz</h1>
        <p>Pilih menu favorit Anda</p>
      </div>
      <button id="cart-btn" class="btn btn-primary" style="display: none; position: relative; font-size: 1.5rem; padding: 0.5rem 0.75rem;">
        ğŸ›’
        <span class="cart-count" id="cart-count" style="position: absolute; top: -8px; right: -8px; background: var(--danger); color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: bold;">0</span>
      </button>
    </div>
  </header>

  <div class="container">
    <!-- Controls -->
    <div class="controls">
      <div class="form-group" style="margin-bottom: 0;">
        <label for="category-filter" class="form-label">Filter Kategori</label>
        <select id="category-filter" class="form-select">
          <option value="">Semua Kategori</option>
        </select>
      </div>

      <div class="form-group" style="margin-bottom: 0;">
        <label for="sort-select" class="form-label">Urutkan</label>
        <select id="sort-select" class="form-select">
          <option value="popular">Paling Populer</option>
          <option value="newest">Terbaru</option>
          <option value="price-asc">Harga: Rendah ke Tinggi</option>
          <option value="price-desc">Harga: Tinggi ke Rendah</option>
        </select>
      </div>
    </div>

    <!-- Menu Grid -->
    <div id="menu-grid" class="grid">
      <p style="text-align: center; color: var(--text-secondary); grid-column: 1/-1;">
        Memuat menu...
      </p>
    </div>
  </div>

  <!-- Chatbot Widget -->
  <div id="chat-widget" style="position: fixed; bottom: 20px; right: 20px; width: 360px; max-width: calc(100vw - 40px); background: white; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.15); overflow: hidden; z-index: 9999; display: none;">
    <div id="chat-header" style="background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); color: white; padding: 16px; display: flex; justify-content: space-between; align-items: center; cursor: pointer;">
      <div style="display: flex; align-items: center; gap: 8px;">
        <span style="font-size: 24px;">ğŸ¤–</span>
        <div>
          <div style="font-weight: 600; font-size: 15px;">Asisten Menu</div>
          <div style="font-size: 11px; opacity: 0.9;">Tanyakan rekomendasi menu</div>
        </div>
      </div>
      <button id="chat-close" style="background: transparent; border: none; color: white; font-size: 24px; cursor: pointer; padding: 0; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: background 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.2)'" onmouseout="this.style.background='transparent'">Ã—</button>
    </div>
    <div id="chat-messages" style="height: 380px; overflow-y: auto; padding: 16px; background: #f9fafb; display: flex; flex-direction: column; gap: 12px;">
      <div style="display: flex; gap: 8px;">
        <div style="width: 32px; height: 32px; background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
          <span style="font-size: 18px;">ğŸ¤–</span>
        </div>
        <div style="background: white; padding: 12px; border-radius: 12px; max-width: 80%; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
          <p style="margin: 0; font-size: 14px; line-height: 1.5; color: #374151;">Hai! Aku bisa bantu rekomendasikan menu WarmindoGenz. Coba tanya:</p>
          <ul style="margin: 8px 0 0 0; padding-left: 20px; font-size: 13px; color: #6b7280;">
            <li>"Rekomendasi menu pedas"</li>
            <li>"Menu murah di bawah 20rb"</li>
            <li>"Menu favorit untuk malam ini"</li>
          </ul>
        </div>
      </div>
    </div>
    <form id="chat-form" style="display: flex; border-top: 1px solid #e5e7eb; background: white;">
      <input id="chat-input" type="text" placeholder="Ketik pertanyaan..." style="flex: 1; border: none; padding: 14px 16px; font-size: 14px; outline: none; font-family: inherit;" autocomplete="off">
      <button type="submit" id="chat-send" style="border: none; background: #f97316; color: white; padding: 0 20px; cursor: pointer; font-weight: 500; transition: background 0.2s;" onmouseover="this.style.background='#ea580c'" onmouseout="this.style.background='#f97316'">
        <span id="chat-send-icon">Kirim</span>
      </button>
    </form>
  </div>

  <!-- Chat Toggle Button -->
  <button id="chat-toggle" style="position: fixed; bottom: 20px; right: 20px; width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); border: none; color: white; font-size: 28px; cursor: pointer; box-shadow: 0 6px 20px rgba(249, 115, 22, 0.4); z-index: 9998; display: flex; align-items: center; justify-content: center; transition: transform 0.2s, box-shadow 0.2s;" onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 8px 24px rgba(249, 115, 22, 0.5)'" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 6px 20px rgba(249, 115, 22, 0.4)'">
    ğŸ’¬
  </button>

  <script type="module" src="js/menu.js"></script>
</body>
</html>
